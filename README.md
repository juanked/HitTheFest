# HitTheFest
CLI to generate festival playlists using the Spotify API


# HitTheFest â€“Â Create Smart Festival Playlists for Spotify

HitTheFest is a command-line application that automatically generates a Spotify playlist for any music festival, using a smart, transparent selection of tracks based on the popularity of the performing artists.

## Features

 - **Automatic track selection:** Chooses the most representative tracks for each artist using a popularity-based percentile algorithm.

 - **Duplicate-safe & ownership-aware:** Ensures no track is repeated and each collaboration is credited only to the main artist in your lineup.

 - **Festival-centric workflow:** Pick your festival and instantly generate a playlist using the artist list in /data/[festival]/artists.json.

 - **Custom festival cover:** Combines the festival's official poster with the HitTheFest logo and uploads it as the playlist cover.

 - **Spotify integration:** Authenticates securely and uploads the playlist (and cover) directly to your account.

 - **Rich playlist description:** Automatically includes info, credits, and the creation date.

 - **International ready:** Handles UTF-8 artist names and playlist titles, perfect for international festivals.

 - **Interactive or scriptable:** Works both interactively and with CLI arguments.

## How does HitTheFest select tracks?

 1. **Artist List:** Each festival has a folder in /data (e.g. /data/Sonorama-2025) containing an artists.json file with a list of performing artistsartists.

 2. **Popularity Calculation:**
The script queries the Spotify API for each artistâ€™s popularity score.

 3. **Percentile Algorithm:**
The popularity scores are split into percentiles (20th, 40th, 60th, 80th):

    - Artists below the 20th percentile get 1 track.
    - 20â€“40th: 2 tracks.
    - 40â€“60th: 3 tracks.
    - 60â€“80th: 4 tracks.
    - Top 20%: 5 tracks.

 4. **Track Ownership & De-duplication:**

    - For each artist, only their "top tracks" on Spotify are considered.
    - If a track is a collaboration, it will be credited to the first artist in the trackâ€™s artist list who appears in your festival lineup (and only that artist).
    - Each track can only appear once in the playlistâ€”no duplicates, even if multiple artists performed it.

 5. **Result:**
The playlist is a fair, balanced showcase of the festival, reflecting both the lineup and each artistâ€™s impact.

## Directory Structure

```bash
â”œâ”€â”€ data
â”‚   â”œâ”€â”€ Sonorama-2025
â”‚   â”‚   â”œâ”€â”€ artists.json     # List of artists
â”‚   â”‚   â””â”€â”€ cover.jpg        # Festival poster (used for playlist cover)
â”‚   â”œâ”€â”€ HTF-small.png        # HitTheFest logo
â”‚   â””â”€â”€ ...                  # More festivals
â”œâ”€â”€ src
â”‚   â””â”€â”€ hitthefest
â”‚       â””â”€â”€ cli.py           # Main CLI application
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```


 - Each festival has a folder with its own artists.json and cover.jpg.

 - The logo HTF-small.png is used for playlist covers.

## Installation

### Requirements:

 - Python 3.8+
 - A Spotify Developer account (for API credentials)

### Install dependencies:

```bash
pip install -r requirements.txt
```

### Set up your .env file:


```bash
SPOTIPY_CLIENT_ID=your_spotify_client_id
SPOTIPY_CLIENT_SECRET=your_spotify_client_secret
SPOTIPY_REDIRECT_URI=http://localhost:8000/callback
```

## Usage

### CLI Interactive


```bash
python src/hitthefest/cli.py
```

You will be prompted to:

 - Select a festival
 - Enter the playlist name
 - Paste your Spotify authentication code (with a link provided for login)

### Scriptable/Flags:

You can also pass parameters directly:

```bash
python src/hitthefest/cli.py --playlist-name "My Festival 2025" --festival Sonorama-2025
```

### Debug Mode:

Add `--debug` to see detailed logs and troubleshooting info.

## Playlist Cover

 - The playlist cover is generated by overlaying the official festival poster (`cover.jpg`) with the HitTheFest logo (`HTF-small.png`) in the bottom-right corner.
 - The image is resized as required by Spotify, and quality/compression are handled automatically.


## Playlist Description

Each playlist automatically gets a description like:

```bash
ðŸŽ§ Enjoy the festival playlist automatically created by HitTheFest.
Tracks have been selected considering the popularity of participating artists.
ðŸ”— More info: https://github.com/juanked/HitTheFest
ðŸ“… Created on 29 May 2025.
```



## FAQ
**Q: How are tracks matched to artists?**
A: Track assignment is strict and unambiguous. Collaborations are only credited to the first relevant artist in your lineup, and no song appears more than once.

**Q: What if an artistâ€™s tracks are not found?**
A: Only exact matches (case- and accent-insensitive) are accepted for artist names. If the artist is not found or is an alias, you'll need to update your artists.json accordingly.

**Q: Can I customize the number of tracks per artist?**
A: The selection is automatic and based on percentiles, but you can modify the logic in cli.py for advanced use cases.

**Q: Can I use my own playlist cover/logo?**
A: Yes! Just update the cover.jpg and HTF-small.png files in the relevant directories.

## License

GPL-3.0 license. See [LICENSE](https://github.com/juanked/HitTheFest/blob/main/LICENSE) for details.
